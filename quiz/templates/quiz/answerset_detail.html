{% extends "base.html" %}
{% load static quiz_extras %}
{% block head %}{% endblock %}

{% block body %}
<div class="container">
    <header>
        <div class="hdo-logo hdo-logo-header">Holder de ord</div>
    </header>
    <div>
        <div class="answers-overview hdo-card">
            <div class="hdo-card-header text-xs-center">
                <h3>Dine svar</h3>
            </div>
            <p>Du er mest enig med følgende partier:</p>
            <ul>
                {% for ans in vg_answers_sorted %}
                <li>{{ ans.medal }}{{ ans.parties|join:', ' }}</li>
                {% endfor %}
            </ul>
        </div>

        <div class="answers-in-detail hdo-card">
            <div class="hdo-card-header text-xs-center">
                <h3>Dine svar i detalj</h3>
            </div>
            <div class="table-outer screen-large">
                <table class="table table-striped">
                    <tr>
                        <th>Spørsmål</th>
                        <th>Ditt svar</th>
                        <th>Basert på løfter</th>
                    </tr>
                    {% regroup vg_alts by manuscript.hdo_category as vg_alts_grouped %}
                    {% for cat, category_alts in vg_alts_grouped %}
                    <tr>
                        <td colspan="3">
                            <span class="hdo-category-title">
                                {{ cat }}
                            </span>
                            {{ category_alts.0.manuscript.hdo_category.label }}
                        </td>
                    </tr>
                    {% for alt in category_alts %}
                    <tr>
                        <td>{{ alt.manuscript.name }}</td>
                        <td>{{ alt }}</td>
                        <td>
                            <ul class="party-list">
                                {% for p in alt.promises.all %}
                                <li><img src="{% get_party_image_url p.promisor_name %}" class="party-image"/> {{ p.body }}</li>
                                {% endfor %}
                            </ul>
                        </td>
                    </tr>
                    {% endfor %}
                    {% endfor %}
                </table>
            </div>
            <div class="screen-small">
                {% for alt in vg_alts %}
                <section>
                    <h4>{{ alt.manuscript.name }}</h4>
                    <p>{{ alt }}</p>
                    <ul class="party-list">
                        {% for p in alt.promises.all %}
                        <li><img src="{% get_party_image_url p.promisor_name %}" class="party-image"/> {{ p.body }}</li>
                        {% endfor %}
                    </ul>
                    <p class="hdo-category">(Tema: {{ alt.manuscript.hdo_category }})</p>
                </section>
                {% endfor %}
            </div>
        </div>

        <div id="react-root"></div>

        <footer>
            <div>
                <div class="hdo-logo"></div>
                <h4>Holder de ord © 2017</h4>
                <small>
                    <div>Kildekode på <a href="https://github.com/holderdeord/hdo-bot-service">GitHub</a> lisensiert
                        under <a href="http://opensource.org/licenses/BSD-3-Clause">BSD</a>.
                    </div>
                    <p>Spørsmål? Ta <a href="mailto:kontakt@holderdeord.no">kontakt</a>.</p>
                </small>
                <div class="links"><a href="https://www.holderdeord.no/portal">holderdeord.no</a><span>·</span><a
                        href="https://twitter.com/holderdeord">@holderdeord</a></div>
            </div>
        </footer>
    </div>
</div>
<script src="{% static " quiz/dist/bundle.js" %}"></script>

{% endblock %}