{% extends "base.html" %}
{% load static quiz_extras %}
{% block head %}
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: "{{ app_id }}",
            xfbml: true,
            version: "v2.6"
        });

    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

</script>
{% endblock %}

{% block title %}Holder de ord{% endblock %}
{% block body %}
<div class="container">
    <header>
        <div class="hdo-logo hdo-logo-header">Holder de ord</div>
    </header>
    <div>
        {% if is_shared %}
        <div style="text-align: center;">
            <p>Hva kan du om norsk politikk?</p>
            <div class="fb-messengermessageus"
                 messenger_app_id="{{ app_id }}"
                 page_id="{{ page_id }}"
                 color="blue"
                 size="xlarge"></div>
        </div>
        {% endif %}
        <div class="answers-overview hdo-card">
            <div class="hdo-card-header text-xs-center">
                <h3>Dine svar</h3>
            </div>
            <div class="hdo-card-content">
                <p>Du har {{ correct_alternatives.count }} av {{ all_alternatives.count }} riktige!</p>
            </div>
        </div>

        <div class="answers-in-detail hdo-card">
            <div class="hdo-card-header text-xs-center">
                <h3>Dine svar i detalj</h3>
            </div>
            <div class="table-outer screen-large">
                <table class="table table-striped">
                    <tr>
                        <th>Spørsmål</th>
                        <th>Ditt svar</th>
                        <th>Riktig svar</th>
                    </tr>
                    {% regroup questions by hdo_category as quiz_alternatives_grouped %}
                    {% for cat, questions in quiz_alternatives_grouped %}
                    <tr>
                        <td colspan="3">
                            <span class="hdo-category-title">
                                {{ cat }}
                            </span>
                            {{ questions.0.hdo_category.label }}
                        </td>
                    </tr>
                    {% for question in questions %}
                    <tr class="{{ question.table_class }}">
                        <td>{{ question.name }}</td>
                        <td>{{ question.answered_text }}</td>
                        <td>{{ question.correct_alts_text }}</td>
                    </tr>
                    {% endfor %}
                    {% endfor %}
                </table>
            </div>
        </div>
    </div>
    {% endblock %}